(this.webpackJsonpcomment=this.webpackJsonpcomment||[]).push([[0],{20:function(e,t,n){e.exports=n(47)},25:function(e,t,n){},26:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(17),o=n.n(r),i=(n(25),n(2)),u=n(3),s=n(5),l=n(4),m=n(6),d=(n(26),function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"comment-nav"},"\u8bc4\u8bba")}}]),t}(a.Component)),f=n(7),v=n.n(f),h=n(18),p=n(19),b=n.n(p),g=function(e){try{var t=JSON.parse(window.localStorage.getItem(e)||"null"),n=JSON.parse(window.localStorage.getItem("".concat(e,"_expired"))||"null");return!n||n>(new Date).getTime()?t:null}catch(a){return null}},w=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;window.localStorage.setItem(e,JSON.stringify(t)),window.localStorage.setItem("".concat(e,"_expired"),JSON.stringify((new Date).getTime()+n))},O={get:function(){var e=Object(h.a)(v.a.mark((function e(t){var n,a,c,r,o,i,u,s,l,m,d,f=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f.length>1&&void 0!==f[1]&&f[1]){e.next=5;break}if(!(n=g("comment_".concat(t)))){e.next=5;break}return e.abrupt("return",n);case 5:return e.next=7,b.a.request({url:"".concat("https://yveltal.yitimo.com","/comment/get/").concat(t),method:"GET"});case 7:if(a=e.sent,c=a.status,r=a.data,o=(r=void 0===r?{}:r).code,i=void 0===o?"0":o,u=r.data,s=void 0===u?null:u,l=r.message,m=void 0===l?"\u8bf7\u6c42\u5931\u8d25":l,d=a.statusText,200!==c){e.next=19;break}if("200"!==i){e.next=18;break}return w("comment_".concat(t),s,12e4),e.abrupt("return",s);case 18:throw new Error("".concat(i,":").concat(m));case 19:throw new Error("".concat(c,":").concat(d));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},j=c.a.createContext("");function y(e){return e<10?"0".concat(e):e}n(45);var E=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.floor,n=e.data,a=(n=void 0===n?{}:n).content,r=void 0===a?"":a,o=n.createTime,i=void 0===o?0:o;return c.a.createElement("div",{className:"comment flex"},c.a.createElement("span",{className:"floor"},"#",t),c.a.createElement("span",{className:"flex-1"},r),c.a.createElement("span",{className:"time"},function(e){if(!e)return e;if("number"!==typeof e)return e;var t=new Date(e);return"".concat(t.getFullYear(),"/").concat(y(t.getMonth()+1),"/").concat(y(t.getDate())," ").concat(y(t.getHours()),":").concat(y(t.getMinutes()),":").concat(y(t.getSeconds()))}(i)))}}]),t}(a.Component),x=(n(46),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={data:[]},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;O.get(this.context).then((function(t){console.log(t),e.setState({data:t})})).catch((function(e){console.error(e)}))}},{key:"render",value:function(){var e=this.state.data,t=(e=void 0===e?{}:e).comments,n=void 0===t?[]:t;return c.a.createElement("div",{className:"comment-list"},n.map((function(e,t){return c.a.createElement(E,{key:e.id,data:e,floor:t+1})})),c.a.createElement("textarea",{className:"create",readOnly:!0,placeholder:"\u6dfb\u52a0\u8bc4\u8bba...",name:"comment",rows:"5"}))}}]),t}(a.Component));x.contextType=j;var k=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(d,null),c.a.createElement(x,null))}}]),t}(c.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var N=document.getElementById("comment-root"),S=N&&N.getAttribute("data-comment-id")||"";o.a.render(c.a.createElement(j.Provider,{value:S},c.a.createElement(k,null)),N),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[20,1,2]]]);
//# sourceMappingURL=main.758c17ea.chunk.js.map