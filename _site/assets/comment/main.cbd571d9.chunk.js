(this.webpackJsonpcomment=this.webpackJsonpcomment||[]).push([[0],{20:function(e,t,n){e.exports=n(47)},25:function(e,t,n){},26:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(17),o=n.n(r),i=(n(25),n(2)),u=n(3),s=n(5),l=n(4),m=n(6),d=(n(26),function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"comment-nav"},"\u8bc4\u8bba")}}]),t}(a.Component)),f=n(7),v=n.n(f),h=n(18),p=n(19),b=n.n(p),g=function(e){try{var t=JSON.parse(window.localStorage.getItem(e)||"null"),n=JSON.parse(window.localStorage.getItem("".concat(e,"_expired"))||"null");return!n||n>(new Date).getTime()?t:null}catch(a){return null}},w=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;window.localStorage.setItem(e,JSON.stringify(t)),window.localStorage.setItem("".concat(e,"_expired"),JSON.stringify((new Date).getTime()+n))},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(h.a)(v.a.mark((function n(){var a,c,r,o,i,u,s,l,m,d,f;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=4;break}if(!(a=g("comment_".concat(e)))){n.next=4;break}return n.abrupt("return",a);case 4:return n.next=6,b.a.request({url:"".concat("https://yveltal.yitimo.com","/comment/get/").concat(e),method:"GET"});case 6:if(c=n.sent,r=c.status,o=c.data,i=(o=void 0===o?{}:o).code,u=void 0===i?"0":i,s=o.data,l=void 0===s?null:s,m=o.message,d=void 0===m?"\u8bf7\u6c42\u5931\u8d25":m,f=c.statusText,200!==r){n.next=18;break}if("200"!==u){n.next=17;break}return w("comment_".concat(e),l,12e4),n.abrupt("return",l);case 17:throw new Error("".concat(u,":").concat(d));case 18:throw new Error("".concat(r,":").concat(f));case 19:case"end":return n.stop()}}),n)})))()},j=c.a.createContext("");function y(e){return e<10?"0".concat(e):e}n(45);var E=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.floor,n=e.data,a=(n=void 0===n?{}:n).content,r=void 0===a?"":a,o=n.createTime,i=void 0===o?0:o;return c.a.createElement("div",{className:"comment flex"},c.a.createElement("span",{className:"floor"},"#",t),c.a.createElement("span",{className:"flex-1"},r),c.a.createElement("span",{className:"time"},function(e){if(!e)return e;if("number"!==typeof e)return e;var t=new Date(e);return"".concat(t.getFullYear(),"/").concat(y(t.getMonth()+1),"/").concat(y(t.getDate())," ").concat(y(t.getHours()),":").concat(y(t.getMinutes()),":").concat(y(t.getSeconds()))}(i)))}}]),t}(a.Component),x=(n(46),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={data:[]},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;O(this.context).then((function(t){console.log(t),e.setState({data:t})})).catch((function(e){console.error(e)}))}},{key:"render",value:function(){var e=this.state.data,t=(e=void 0===e?{}:e).comments,n=void 0===t?[]:t;return c.a.createElement("div",{className:"comment-list"},n.map((function(e,t){return c.a.createElement(E,{key:e.id,data:e,floor:t+1})})),c.a.createElement("textarea",{className:"create",readOnly:!0,placeholder:"\u6dfb\u52a0\u8bc4\u8bba...",name:"comment",rows:"5"}))}}]),t}(a.Component));x.contextType=j;var k=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(d,null),c.a.createElement(x,null))}}]),t}(c.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var N=document.getElementById("comment-root"),S=N&&N.getAttribute("data-comment-id")||"";o.a.render(c.a.createElement(j.Provider,{value:S},c.a.createElement(k,null)),N),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[20,1,2]]]);
//# sourceMappingURL=main.cbd571d9.chunk.js.map