<!DOCTYPE html>
<html>
<head>
    <title>个人理解区块链及其产品 | yitimo的个人博客</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="HandheldFriendly" content="True" />
    <link rel="shortcut icon" href="/assets/images/favicon.ico" type="image/png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="/assets/css/global.min.css" />
    <!-- Begin Jekyll SEO tag v2.4.0 -->
<meta name="generator" content="Jekyll v3.7.2" />
<meta property="og:title" content="再見二丁目" />
<meta property="og:locale" content="zh_CN" />
<meta name="description" content="yitimo的个人博客" />
<meta property="og:description" content="yitimo的个人博客" />
<link rel="canonical" href="https://blog.yitimo.com" />
<meta property="og:url" content="https://blog.yitimo.com" />
<meta property="og:site_name" content="再見二丁目" />
<script type="application/ld+json">
{"name":"再見二丁目","description":"yitimo的个人博客","@type":"WebSite","url":"https://blog.yitimo.com","headline":"再見二丁目","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<!-- Bing -->
<meta name="msvalidate.01" content="C6A533BFA9ED34F59CE76F9AC19623EF" />
<!-- Baidu -->
<meta name="baidu-site-verification" content="VWCN98I3kC" />
<!-- Sougou -->
<meta name="sogou_site_verification" content="7e6MA7i4va"/>
<!-- 360 -->
<meta name="360-site-verification" content="cdabf9283d84ba985379081ab8882306" />
<!-- google -->
<meta name="google-site-verification" content="yT-0lXiM2x-GWfMubV7vqohZtKCEVJqyMaj_LS-45J0" />

</head>
<body>
    <h1 style="display: none;">个人理解区块链及其产品 | yitimo的个人博客</h1>
    <div class="home-body">
        <div class="nav">
    <a class="nav-avatar" href="/">
        <img src="/assets/images/yitimo.jpg" alt="nav-avatar of yitimo" />
        <div>
            Yitimo's Blog
        </div>
    </a>
    <div class="nav-body">
        <a class="nav-body-block" href="https://github.com/yitimo" target="_blank">
            <img src="/assets/images/GitHub.svg" alt="Github" title="Github" />
        </a>
    </div>
    <div class="nav-foot">
        <div class="nav-foot-block">
            <div class="nav-foot-block-title">联系我:</div>
            <a href="mailto:admin@yitimo.com">个人邮箱</a><a href="mailto:yitimohu@gmail.com">Gmail</a>
        </div>
        <div class="nav-foot-block">
            <div class="nav-foot-block-title">此博客同时部署在:</div>
            <a href="https://yitiblog.netlify.com/" target="_blank">Netlify</a><a href="https://yitimo.github.io/" target="_blank">Github Page</a>
        </div>
    </div>
</div>
        <div class="home-content">
            <div class="article">
                <h1>个人理解区块链及其产品</h1>
                <p>本文将从开发者视角谈谈个人近段时间研究区块链技术得到的收获与困惑。</p>

<h2 id="字面理解区块链">字面理解区块链</h2>
<p>从字面理解<code class="highlighter-rouge">BlockChain</code>一词，即是多个区块串成的链。其中链的存在需要用心去感受，类比数据接口中链表结构的<code class="highlighter-rouge">next</code>指针，这里则是替换称为上一个区块得到的<code class="highlighter-rouge">hash</code>，而比特币中矿工的所有工作都是为了得到这一<code class="highlighter-rouge">hash</code>以创建一个新区块连接到主链上。其中区块的存在用于存放去中心化的数据，比特币中就是传说中的<code class="highlighter-rouge">UTXO</code>，即包含输入(扣钱地址)、输出(加钱地址)的交易记录。</p>

<p>以上所有的数据都没有一个中心化的服务器支撑，而是保存在各个节点，理想状态下每个节点都存有完整的区块链数据，当有新数据产生时，所有节点就都加上包含了新数据的新区快。剩下的问题就是如何保证所有节点的数据都是统一的(重点在于统一，至于正确与否，如果所有节点都认为这没问题，那就是正确的)。</p>

<p>至此区块链目前的一切都讲完了，个人的第一个困惑就是，核心如此简明(且强大)的技术，目前除了二指可数的产品外的其他产品却一直给我一种感觉就是——这跟本没必要使用区块链实现。</p>

<h2 id="简单概括比特币">简单概括比特币</h2>
<p>强烈推荐<code class="highlighter-rouge">《精通比特币》</code>一书。</p>

<p>上面提到的这本书的书名很合我意，合意在<code class="highlighter-rouge">精通</code>一词，聪明人从不敢轻易说自己精通了什么，但精通比特币却是可能的，因为它足够简单，虽然简单却足够强大。</p>

<p>简单概括比特币做的事情：</p>
<ol>
  <li>记录交易生成UTXO</li>
  <li>收集UTXO生成区块</li>
  <li>拼接区块到主链</li>
</ol>

<p>简单补充比特币为了正确完成以上三件事解决问题的方法：</p>
<ol>
  <li>UTXO永久记录且主链统一，余额由所有UTXO计算得到，理论上绝对正确，只存在双重支付可能</li>
  <li>主链侧链机制，双重支付时会产生侧链，但最终只会有一条主链，侧链中的重复支付无效</li>
  <li>挖矿机制，全网竞争记账，成功有奖，但成功记假/错账会直接被推翻</li>
</ol>

<p>至于多数人盲目放大的密码学技术，只能说是比特币站在了巨人肩膀上，hash啊地址啊公钥私钥什么的，即使是开发者都只需要拿过来用，不应该归为区块链技术，所以上文完全不提钱包地址以及UTXO归属问题，非要提一句的话，保管好自己的私钥，只有自己的私钥能解密属于自己的UTXO，进一步说就是余额。</p>

<h2 id="简单概括以太坊">简单概括以太坊</h2>
<p>这里只讲以太坊区别于比特币最诱人的一点，就是智能合约。无耐全网(或者说除了这俩的其他区块链产品)都在有意无意神化智能合约，给人一种这合约好像还真的挺智能的的感觉。</p>

<p>简单忽略以太坊除了智能合约外的比特币传承。</p>

<p>个人理解到的智能合约，不还是个地址而已，只不过这个地址的拥有者是个机器人，蠢到只会机械地做少量事情但又聪明到从不失误的机器人。</p>

<p>从这个智能合约出发，能做的事就多了：</p>
<ol>
  <li>让机器人先向一亿个地址各收取１个以太币，过一周后随机发五千万给一个地址、一千万给四个地址、一百万给十个地址。</li>
  <li>想想拿了五千万ETH怎么花。</li>
  <li>……</li>
</ol>

<p>上面这就是传说中的去中心化应用(DAPP)，字面理解就是去除中心化(以规则公开的机器人为中心)的应用。</p>

<p>从源码看以太坊中一个交易(类比UTXO)是这样的：</p>
<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// 以太坊区块中的交易</span><span class="x">
</span><span class="k">type</span><span class="x"> </span><span class="n">Transaction</span><span class="x"> </span><span class="k">struct</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="c">// 交易数据</span><span class="x">
	</span><span class="n">data</span><span class="x"> </span><span class="n">txdata</span><span class="x">
	</span><span class="c">// 缓存　不关心</span><span class="x">
	</span><span class="n">hash</span><span class="x"> </span><span class="n">atomic</span><span class="o">.</span><span class="n">Value</span><span class="x">
	</span><span class="n">size</span><span class="x"> </span><span class="n">atomic</span><span class="o">.</span><span class="n">Value</span><span class="x">
	</span><span class="n">from</span><span class="x"> </span><span class="n">atomic</span><span class="o">.</span><span class="n">Value</span><span class="x">
</span><span class="p">}</span><span class="x">
</span><span class="c">// 以太坊交易的数据</span><span class="x">
</span><span class="k">type</span><span class="x"> </span><span class="n">txdata</span><span class="x"> </span><span class="k">struct</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="c">// 账户签名，估计代表了谁发起的交易</span><span class="x">
	</span><span class="n">AccountNonce</span><span class="x"> </span><span class="kt">uint64</span><span class="x">          </span><span class="s">`json:"nonce"    gencodec:"required"`</span><span class="x">
	</span><span class="c">// Gas 价格</span><span class="x">
	</span><span class="n">Price</span><span class="x">        </span><span class="o">*</span><span class="n">big</span><span class="o">.</span><span class="n">Int</span><span class="x">        </span><span class="s">`json:"gasPrice" gencodec:"required"`</span><span class="x">
	</span><span class="c">// Gas　上限</span><span class="x">
	</span><span class="n">GasLimit</span><span class="x">     </span><span class="o">*</span><span class="n">big</span><span class="o">.</span><span class="n">Int</span><span class="x">        </span><span class="s">`json:"gas"      gencodec:"required"`</span><span class="x">
	</span><span class="c">// 交易给谁, 为空则为合约创建，也就是说这个交易把钱给了合约账户</span><span class="x">
	</span><span class="n">Recipient</span><span class="x">    </span><span class="o">*</span><span class="n">common</span><span class="o">.</span><span class="n">Address</span><span class="x"> </span><span class="s">`json:"to"       rlp:"nil"`</span><span class="x"> </span><span class="c">// nil means contract creation</span><span class="x">
	</span><span class="c">// 交易数量</span><span class="x">
	</span><span class="n">Amount</span><span class="x">       </span><span class="o">*</span><span class="n">big</span><span class="o">.</span><span class="n">Int</span><span class="x">        </span><span class="s">`json:"value"    gencodec:"required"`</span><span class="x">
	</span><span class="c">// 估计就是合约代码啊之类的</span><span class="x">
	</span><span class="n">Payload</span><span class="x">      </span><span class="p">[]</span><span class="kt">byte</span><span class="x">          </span><span class="s">`json:"input"    gencodec:"required"`</span><span class="x">

	</span><span class="c">// 以下不关心</span><span class="x">
	</span><span class="n">V</span><span class="x"> </span><span class="o">*</span><span class="n">big</span><span class="o">.</span><span class="n">Int</span><span class="x"> </span><span class="s">`json:"v" gencodec:"required"`</span><span class="x">
	</span><span class="n">R</span><span class="x"> </span><span class="o">*</span><span class="n">big</span><span class="o">.</span><span class="n">Int</span><span class="x"> </span><span class="s">`json:"r" gencodec:"required"`</span><span class="x">
	</span><span class="n">S</span><span class="x"> </span><span class="o">*</span><span class="n">big</span><span class="o">.</span><span class="n">Int</span><span class="x"> </span><span class="s">`json:"s" gencodec:"required"`</span><span class="x">
	</span><span class="n">Hash</span><span class="x"> </span><span class="o">*</span><span class="n">common</span><span class="o">.</span><span class="n">Hash</span><span class="x"> </span><span class="s">`json:"hash" rlp:"-"`</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre></div></div>

<p>可见以太坊相比比特币确实至少在交易上就多了些东西，不过一切都还是明朗清晰的，仍然能厚脸皮说一句以太坊也很简单。当然其在区块和链本身的逻辑上相比比特币也复杂化了一些。</p>

<p>但是，从万恶之源<code class="highlighter-rouge">ERC20</code>标准开始，区块链这个技术就让我十分困惑了。</p>

<h2 id="链币token应用">链、币、token、应用</h2>
<p>比特币以至以太坊中的链，都足够让我佩服的，保证了各个区块不会过大，并保证区块之间都有关联，任何一个账户的余额，从创世区块算起，都是完全正确的，并且也只能这样计算得到。
但目前除此之外的一些链，都让我觉得，这个链断了也没关系，其所谓区块都是强行构造出来，主要原因是其底层不过也是以太坊中的交易，而其宣称的链根本不存在，只是个合约罢了。
至于币，分两种，一种是比特币、以太币这样由一条条交易计算得到的余额，一种则是以太坊搞出来的<code class="highlighter-rouge">ERC20 token</code>，完全抛开网络上的各种白皮书、交易所，其余的币都是由某个智能合约来维护。个人理解的token发布流程概括是这样：</p>
<ol>
  <li>准备一个智能合约(甚至官方自带)</li>
  <li>发布这个智能合约</li>
  <li>由智能合约来收集大家的以太币，并承诺每个人的地址的新币余额为多少多少</li>
  <li>包装，再包装</li>
</ol>

<p>由此看来，这些链、币、token、应用其实都是同一样东西——智能合约，岂不是天下大同 : )</p>

<h2 id="只有交易能组成真正的区块链吗">只有交易能组成真正的区块链吗</h2>
<p>以上的所有说法都非常片面，并给我带来了新的困惑——难道只有交易记录能组成区块链吗？还是说区块链本身就是为了永久且去中心化地保存有迹可循的交易记录而存在的？</p>

<p>举个小反例，比如想要将信息数据组成区块串成链，那信息数据之间有何计算关系？这样的链健壮吗？如果链本身不是数据，说白不还只是个基于某条链的数据交易应用，就算是去中心化的，谈何验证？我用链上的币买的数据，用支付宝不是一样？</p>

<p>所以，个人目前的结论是，非数字交易组成的区块链还有待创造，别的都是应用而已。去不去中心化都一样，DAPP本身没问题，但装作是条链就扯淡了。</p>

            </div>
            <div class="article-pager">
                
                <a class="article-pager-block" href="/jekyll/update/2018/01/20/yitimos-first-post.html">
                    <img src="/assets/images/prev.svg" alt="Older" />
                    <span class="article-pager-block-title">Yitimo's first post on jekyll</span>
                    <span class="article-pager-block-tag">更新的</span>
                </a>
                
                
                <a class="article-pager-block" href="/jekyll/update/2018/02/06/how-to-run-neo-node.html">
                    <img src="/assets/images/next.svg" alt="Newer" title="Newer post" />
                    <span class="article-pager-block-title">NEO全节点客户端的基本使用，节点的运行和共识达成</span>
                    <span class="article-pager-block-tag">更早的</span>
                </a>
                
            </div>
        </div>
        <script>
    // baidu统计
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?decb433e7fc3d68b16da80cdd59ee827";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
    })();
    // baidu 站长
    (function(){
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        }
        else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>
    </div>
</body>
</html>
